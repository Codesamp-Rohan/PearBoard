<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Whiteboard â€” Vanilla JS</title>
  <link rel="stylesheet" href="./style.css" />
  <link rel="stylesheet" href="./node_modules/@fortawesome/fontawesome-free/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
</head>
<body>
<button id="state-details" type="button">!</button>

<div id="titlebar">
  <pear-ctrl></pear-ctrl>
  <p id="version">1.0.7</p>
</div>

<!--Canvas Create/Join Setup-->
<div id="setup" style="z-index: 999; overflow: hidden">
  <div id="rooms-list-container">
    <div style="display: flex; flex-direction: column; gap: 16px; height: 90%">
    <h5 style="padding: 0 8px">Canvas Room History</h5>
    <div id="rooms-list" class="">
    </div>
    </div>
    <div class="account-details hidden" style="display: flex; flex-direction: row; align-items: center; gap: 4px;">
      <button id="logout-btn" type="button">Logout <i class="fas fa-sign-out icon" title="Logout icon"></i></button>
      <button id="account-btn" type="button">Account Info ! </button>
    </div>
  </div>
  <div id="create-join-container">
    <div id="room-name-form" class="hidden" style="display: flex; flex-direction: row; gap: 4px;">
      <button class="button"  type="button" id="room-name-btn"><img class="icon" src="assets/icons/join.png" alt="icon" />Add Name</button>
      <input required id="room-name-input" type="text" placeholder="Canvas Name!!!" />
    </div>
  <div>
    <button class="button" id="create-canvas"><img class="icon" src="assets/icons/create.png" alt="icon" />Create</button>
  </div>
  <div id="or">
    - or -
  </div>
  <div id="join-form" style="display: flex; flex-direction: row; gap: 4px;">
    <button class="button"  type="button" id="join-canvas"><img class="icon" src="assets/icons/join.png" alt="icon" />Join</button>
    <input required id="join-canvas-topic" type="text" placeholder="Canvas Topic!!!" />
  </div>
  </div>
</div>
<div id="loading" class="loader-container hidden">
  <div class="loader"></div>
</div>
<header class="toolbar hidden" role="toolbar" aria-label="Whiteboard toolbar">
  <div class="btn--container">
  <div class="group" id="tools" style="gap: 4px;">
    <button class="btn active" data-tool="pen" title="Pen (P)"><img class="icon" src="./assets/icons/pen.png" alt="icon" /></button>
    <button class="btn" data-tool="eraser" title="Eraser (E)"><img class="icon" src="assets/icons/eraser.png" alt="icon" /></button>
    <button class="btn" data-tool="line" title="Line (L)"><img class="icon" src="assets/icons/line.png" alt="icon" /></button>
    <button class="btn" data-tool="rect" title="Rectangle (R)"><img class="icon" src="assets/icons/rect.png" alt="icon" /></button>
    <button class="btn" data-tool="ellipse" title="Ellipse (O)"><img class="icon" src="assets/icons/ellipse.png" alt="icon" /></button>
    <button class="btn" data-tool="diamond" title="Diamond (D)"><img class="icon" src="assets/icons/diamond.png" alt="icon" /></button>
    <div class="divider"></div>
    <button class="btn" data-tool="text" title="Text (T)"><img class="icon" src="assets/icons/text.png" alt="icon" /></button>
    <button class="btn" data-tool="hand" title="Hand (H)"><img class="icon" src="assets/icons/hand.png" alt="icon" /></button>
    <div class="divider"></div>
    <button id="undo" class="btn" title="Undo (Ctrl/Cmd+Z)"><img class="icon" src="assets/icons/undo.png" alt="icon" /></button>
    <button id="redo" class="btn" title="Redo (Ctrl/Cmd+Shift+Z)"><img class="icon" src="assets/icons/redo.png" alt="icon" /></button>
    <div class="divider"></div>
    <button id="slide-icon-btn" class="btn" title="Icons"><img src="./assets/icons/gallery.png" class="icon" alt="clean-icon"></button>
    <button id="clear" class="btn" title="Clear"><img src="./assets/icons/clean.png" class="icon" alt="clean-icon"></button>
  </div>
  </div>
  <div class="drawing-controls">
    <button type="button" id="toggleControls" class="controls-toggle" aria-label="Toggle drawing controls" aria-expanded="false">
      <img class="icon" src="assets/icons/options.png" alt="Drawing options" />
      <h5>Stroke Settings</h5>
    </button>

    <div class="controls-container" id="controlsContainer">
      <div class="group column" id="colorGroup">
        <label class="label">Stroke</label>
        <div style="width: 100%; display: flex; flex-direction: row; align-items: center; gap: 4px;">
          <span style="width: 20px; height: 20px; overflow: hidden; border-radius: 12px;position: relative">
            <input id="color" type="color" value="#111111" style="position: absolute;padding: 0;border: none;top: 50%;left: 50%;transform: translate(-50%, -46%);scale: 1.1;"/>
          </span>
          <p id="color-text">#111111</p>
        </div>
      </div>

      <div class="group column" id="sizeGroup">
        <div style="width: 100%; display: flex; flex-direction: row; align-items: center; justify-content: space-between">
          <label class="label">Size: </label>
          <p id="size-text">6px</p>
        </div>
        <input id="size" type="range" min="1" max="100" value="6" />
      </div>

      <div class="group column" style="padding-bottom: 8px;" id="opacityGroup">
        <div style="width: 100%; display: flex; flex-direction: row; align-items: center; justify-content: space-between">
          <label for="opacity-control" class="label">Opacity: </label>
          <p id="opacity-text">1</p>
        </div>
        <input type="range" id="opacity-control" min="0" max="1" step="0.05" value="1" />
      </div>
    </div>
  </div>
</header>

<!--Canvas Board-->
<main class="board-wrap hidden">

  <!--Floaters-->
  <div class="right-top-data">
    <button type="button" id="toggleRightPanel" class="controls-toggle" aria-label="Toggle right panel" aria-expanded="false">
      <h5>States Edit</h5>
      <img class="icon" src="assets/icons/setting.png" alt="Options" />
    </button>

    <div class="right-panel-container hidden" id="rightPanelContainer">
      <div class="panel-group">
        <p class="drag-msg">Use <b>shift</b> to drag</p>

        <button class="load-state-btn" type="button">
          <img class="icon" src="./assets/icons/load.png" alt="load-img">
          <div class="text-container">
            <h5>Load Latest State</h5>
            <p>Click to load the last state you saved.</p>
          </div>
        </button>

        <button class="slide-state-btn" type="button">
          <img class="icon" src="./assets/icons/slide.png" alt="load-img">
          <div class="text-container">
            <h5>Slide State</h5>
            <p>Click to open all states and load accordingly.</p>
          </div>
        </button>

        <div class="divider-menu"></div>

        <button class="canvas-room-key hidden" type="button">
          <img class="icon" src="./assets/icons/copy.png" alt="copy-img">
          <div class="text-container">
            <h5>Canvas Topic</h5>
            <p id="canvas-topic" class="truncate-28"></p>
          </div>
        </button>

        <button class="hidden" type="button" id="peer-count-btn">
          <img class="icon" src="./assets/icons/peers.png" alt="copy-img">
          <div class="text-container">
            <h5>Peer Count</h5>
            <p id="peers-count">1</p>
          </div>
        </button>

        <div class="divider-menu"></div>

        <button class="slide-state-btn" id="save" type="button">
          <img class="icon" src="./assets/icons/download.png" alt="download-img">
          <div class="text-container">
            <h5>Save as Image</h5>
            <p>Save the canvas as image with transparent background.</p>
          </div>
        </button>

        <button class="slide-state-btn" id="save-state" type="button">
          <img class="icon" src="./assets/icons/save.png" alt="save-state-img">
          <div class="text-container">
            <h5>Save the State</h5>
            <p>Save the current canvas state.</p>
          </div>
        </button>

        <button class="slide-state-btn" id="delete-all-state" type="button">
          <img class="icon" src="./assets/icons/delete.png" alt="save-state-img">
          <div class="text-container">
          <h5>Delete all States</h5>
          <p>Delete all the states from canvas.</p>
        </div>
        </button>



        <div class="divider-menu"></div>

        <div class="name-container">
          <button class="button peer-name-container" type="button">
            <img class="icon" src="./assets/icons/arrow.png" alt="copy-img">
            <p id="local-peer-name" class="name--btn"></p>
          </button>
          <div class="hidden" id="name--input--popup">
            <input style="font-size: 12px; width: 100%" id="username-input" placeholder="Enter your name" />
            <button style="font-size: 12px;" id="username-submit">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div id="slide-state-container" class="hidden">
    <button id="slide-state-close-btn">Close</button>
  </div>
  <div id="slide-icon-container" class="hidden">
    <button id="slide-icon-close-btn">Close</button>
  </div>
  <div id="zoom-scale-display-container" style="">
    <button class="zoom_min">-</button><p id="zoom-scale-display">100%</p><button class="zoom_max">+</button>
  </div>
  <canvas id="board" aria-label="Drawing canvas"></canvas>
  <p id="mouse-follower">You</p>
</main>

<script src="/app.js" type="module"></script>
</body>
</html>
